{"version":3,"sources":["services/login.js","services/user.js","services/button.js","components/UserForm.js","components/GameButton.js","App.js","index.js"],"names":["login","credentials","a","axios","post","response","data","signup","getPlayer","id","get","updatePlayerPoints","player","put","increment","newButton","getButton","getButtonPresses","presses","UserForm","handleUsernameChange","handlePasswordChange","username","password","htmlFor","type","value","name","onChange","GameButton","handleButtonPress","onClick","App","useState","user","setUser","setUsername","setPassword","userPoints","setUserPoints","rewardCounter","setRewardCounter","useEffect","loggedUserJSON","window","localStorage","getItem","JSON","parse","points","updateRewardCounter","handleLogin","event","preventDefault","loginService","setItem","stringify","console","log","handleSignUp","userService","handleLogout","clear","buttonService","button","handlePlayerPoints","storedPlayer","updatedPlayer","updatedPoints","buttonPresses","confirm","className","handleSubmit","target","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ec8fe2c5.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/login'\n\nconst login = async credentials => {\n  const response = await axios.post(baseUrl, credentials)\n  return response.data\n}\n\nexport default { login }","import axios from 'axios'\nconst baseUrl = '/api/users'\n\nconst signup = async credentials => {\n  const response = await axios.post(baseUrl, credentials)\n  return response.data\n}\n\nconst getPlayer = async (id) => {\n  const response = await axios.get(`${baseUrl}/${id}`)\n  return response.data\n}\n\nconst updatePlayerPoints = async (id, player) => {\n  const response = await axios.put(`${baseUrl}/${id}`, player)\n  return response.data\n}\n\nexport default { signup, updatePlayerPoints, getPlayer }","import axios from 'axios'\nconst baseUrl = '/api/button'\n\nconst increment = async (id, newButton) => {\n  const response = await axios.put(`${baseUrl}/${id}`, newButton)\n  return response.data\n}\n\nconst getButton = async () => {\n  const response = await axios.get(baseUrl)\n  return response.data\n}\n\nconst getButtonPresses = async () => {\n  const response = await axios.get(baseUrl)\n  return response.data.presses\n}\n\nexport default { increment, getButton, getButtonPresses }","import React from 'react'\n\nconst UserForm = ({\n  handleUsernameChange,\n  handlePasswordChange,\n  username,\n  password,\n}) => {\n  return (\n    <div>\n      <h2>Account</h2>\n      <form>\n\n        <label htmlFor=\"username\">Username </label>\n        <br/>\n        <input\n          type=\"text\"\n          value={username}\n          name=\"Username\"\n          onChange={handleUsernameChange}\n        />\n        <br/>\n        <label htmlFor=\"password\">Password </label>\n        <br/>\n        <input\n          type=\"password\"\n          value={password}\n          name=\"Password\"\n          onChange={handlePasswordChange}\n        />\n\n      </form>\n    </div>\n  )\n}\n\nexport default UserForm","import React from 'react'\n\nconst GameButton = ({ handleButtonPress}) => {\n  return (\n  <div>\n    <button onClick={handleButtonPress}>The Button</button>\n  </div>\n  )\n}\n\nexport default GameButton","import React, { useState, useEffect } from 'react'\nimport loginService from './services/login'\nimport userService from './services/user'\nimport buttonService from './services/button'\nimport UserForm from './components/UserForm'\nimport GameButton from './components/GameButton'\n\nconst App = () => {\n  const [user, setUser] = useState(null)\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [userPoints, setUserPoints] = useState(null)\n  const [rewardCounter, setRewardCounter] = useState('')\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedPainikepeliUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n\n      setUser(user)\n      setUserPoints(user.points)\n      updateRewardCounter()\n    }\n  }, [])\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n    try {\n      const user = await loginService.login({\n        username, password,\n      })\n\n      window.localStorage.setItem(\n        'loggedPainikepeliUser', JSON.stringify(user)\n      )\n\n      setUser(user)\n      setUserPoints(user.points)\n\n      updateRewardCounter()\n\n      setUsername('')\n      setPassword('')\n\n    } catch (exception) {\n      console.log('Error: ', exception)\n    }\n  }\n\n  const handleSignUp = async (event) => {\n    event.preventDefault()\n    try {\n      const user = await userService.signup({\n        username, password,\n      })\n\n      window.localStorage.setItem(\n        'loggedPainikepeliUser', JSON.stringify(user)\n      )\n\n      setUser(user)\n      setUserPoints(user.points)\n\n      updateRewardCounter()\n\n      setUsername('')\n      setPassword('')\n\n    } catch (exception) {\n      console.log('Error: ', exception)\n    }\n  }\n\n  const handleLogout = async (event) => {\n    event.preventDefault()\n    localStorage.clear()\n    setUser(null)\n  }\n\n  const handleButtonPress = async (event) => {\n    event.preventDefault()\n\n    const button = await buttonService.getButton()\n\n    const newButton = {\n      presses: button.presses + 1\n    }\n\n    await buttonService.increment(button.id, newButton)\n\n    await handlePlayerPoints()\n\n    updateRewardCounter()\n\n  }\n\n  const handlePlayerPoints = async () => {\n\n    const storedPlayer = JSON.parse(window.localStorage.getItem('loggedPainikepeliUser'))\n    const updatedPlayer = {\n      ...storedPlayer,\n      points: storedPlayer.points < 1 ? 0 : storedPlayer.points - 1\n    }\n    let updatedPoints = updatedPlayer.points\n    setUserPoints(updatedPoints)\n\n    const buttonPresses = await buttonService.getButtonPresses()\n\n    if (updatedPlayer.points < 1) {\n      if (window.confirm(\"No more points. Start again with 20 points?\")) {\n        updatedPoints = 20\n        setUserPoints(20)\n      } else {\n        localStorage.clear()\n        setUser(null)\n      }\n    }\n\n    else if (buttonPresses % 500 === 0) {\n      console.log('Reward player with 250 points')\n      updatedPoints += 250\n      setUserPoints(updatedPlayer.points)\n    }\n\n    else if (buttonPresses % 100 === 0) {\n      console.log('Reward player with 40 points')\n      updatedPoints += 40\n      setUserPoints(updatedPlayer.points)\n    }\n\n    else if (buttonPresses % 10 === 0) {\n      console.log('Reward player with 5 points')\n      updatedPoints += 5\n      setUserPoints(updatedPlayer.points)\n    }\n\n    updatedPlayer.points = updatedPoints\n    setUserPoints(updatedPlayer.points)\n\n    await userService.updatePlayerPoints(user.id, updatedPlayer)\n    window.localStorage.setItem('loggedPainikepeliUser', JSON.stringify(updatedPlayer))\n\n  }\n\n  const updateRewardCounter = async () => {\n    const buttonPresses = await buttonService.getButtonPresses()\n    setRewardCounter(10 - (buttonPresses % 10))\n  }\n\n  const userForm = () => {\n    return (\n      <div>\n        <div>\n          <UserForm\n            handleSubmit={handleLogin}\n            handleUsernameChange={({ target }) => setUsername(target.value)}\n            handlePasswordChange={({ target }) => setPassword(target.value)}\n            username={username}\n            password={password}\n          />\n        </div>\n        <div>\n          <button onClick={handleLogin}>Log in</button> or <button onClick={handleSignUp}>Sign up</button>\n        </div>\n      </div>\n    )\n  }\n\n  const gameDisplay = () => {\n    return (\n      <div>\n        <div>\n          <GameButton handleButtonPress={handleButtonPress} />\n        </div>\n        <div>\n          Your points: {userPoints} < br />\n          Clicks until next reward: {rewardCounter}\n        </div>\n        <div>\n          <p>\n            every 10th click: +5 points <br/>\n            every 100th click: +40 points <br/>\n            every 500th click: +250 points <br/>\n            one click: -1 point\n          </p>\n        </div>\n        <div>\n          <button onClick={handleLogout}>Log out</button>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"content\">\n      <div>\n        <h1>Button the Game</h1>\n      </div>\n      <div>\n        {user === null ? userForm() : gameDisplay()}\n      </div>\n    </div>\n  )\n}\n\nexport default App ","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}